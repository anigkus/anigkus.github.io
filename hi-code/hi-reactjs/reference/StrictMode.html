<!DOCTYPE html>
<html>

<body>
    <div id="root"></div>
</body>
<!-- This setup is not suitable for production. -->
<!-- Only use it in development! -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react?dev",
    "react-dom/client": "https://esm.sh/react-dom/client?dev"
  }
}
</script>
<script type="text/babel" data-type="module">
    import React, { StrictMode, Profiler,useEffect } from 'react';
    import { createRoot } from 'react-dom/client';

    const root = createRoot(document.getElementById("root"));
    root.render(
        <StrictMode>
            <Profiler id="App" onRender={onRender}>
                <ChatRoom />
            </Profiler>
        </StrictMode>

    );
    function onRender(id, phase, actualDuration, baseDuration, startTime, commitTime) {
        // Aggregate or log render timings...
    }
    const serverUrl = 'https://localhost:1234';
    const roomId = 'general';

    export default function ChatRoom() {
        useEffect(() => {
            const connection = createConnection(serverUrl, roomId);
            connection.connect();
        }, []);
        return <h1>Welcome to the {roomId} room!</h1>;
    }

    let connections = 0;

    function createConnection(serverUrl, roomId) {
        // A real implementation would actually connect to the server
        return {
            connect() {
                console.log('✅ Connecting to "' + roomId + '" room at ' + serverUrl + '...');
                connections++;
                console.log('Active connections: ' + connections);
            },
            disconnect() {
                console.log('❌ Disconnected from "' + roomId + '" room at ' + serverUrl);
                connections--;
                console.log('Active connections: ' + connections);
            }
        };
    }
</script>

</html>